{% extends "base.html" %}

{% block title %}Add Company - DailyScraper{% endblock %}

{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
    <h1>Add New Company</h1>
    <a href="/boards" class="btn btn-secondary">Back to Companies</a>
</div>

<div class="card" style="max-width: 600px;">
    <form method="POST">
        <div class="form-group">
            <label class="form-label" for="name">Company Name</label>
            <input type="text" id="name" name="name" class="form-input" required
                   placeholder="e.g., Acme Corp">
        </div>

        <div class="form-group">
            <label class="form-label" for="url">Careers Page URL</label>
            <input type="url" id="url" name="url" class="form-input" required
                   placeholder="https://...">
        </div>

        <div class="form-group">
            <label class="form-label" for="type">Job Board Type</label>
            <select id="type" name="type" class="form-select" onchange="toggleSelectors()">
                <option value="generic">Generic (Custom Selectors)</option>
                <option value="greenhouse">Greenhouse</option>
                <option value="lever">Lever</option>
                <option value="ashby">Ashby</option>
                <option value="nextjs">Next.js</option>
                <option value="api">API</option>
            </select>
        </div>

        <div id="selectors" class="selectors-group">
            <h3 style="margin-bottom: 1rem;">CSS Selectors</h3>
            <p style="color: #86868b; font-size: 0.9rem; margin-bottom: 1rem;">
                Inspect the website to find the CSS selectors for each field.
            </p>

            <div class="form-group">
                <label class="form-label" for="selector_job_container">Job Container Selector *</label>
                <input type="text" id="selector_job_container" name="selector_job_container" class="form-input"
                       placeholder="div.job">
            </div>

            <div class="form-group">
                <label class="form-label" for="selector_title">Title Selector *</label>
                <input type="text" id="selector_title" name="selector_title" class="form-input"
                       placeholder="h2">
            </div>

            <div class="form-group">
                <label class="form-label" for="selector_link">Link Selector *</label>
                <input type="text" id="selector_link" name="selector_link" class="form-input"
                       placeholder="a">
            </div>

            <div class="form-group">
                <label class="form-label" for="selector_location">Location Selector (optional)</label>
                <input type="text" id="selector_location" name="selector_location" class="form-input"
                       placeholder=".location">
            </div>

            <div class="form-group">
                <label class="form-label" for="selector_description">Description Selector (optional)</label>
                <input type="text" id="selector_description" name="selector_description" class="form-input"
                       placeholder=".description">
            </div>

            <div class="form-group">
                <label class="form-label" for="selector_date_posted">Date Posted Selector (optional)</label>
                <input type="text" id="selector_date_posted" name="selector_date_posted" class="form-input"
                       placeholder=".date">
            </div>
        </div>

        <div style="display: flex; gap: 1rem; margin-top: 2rem;">
            <button type="submit" class="btn btn-primary">Add Company</button>
            <a href="/boards" class="btn btn-secondary">Cancel</a>
        </div>
    </form>
</div>
{% endblock %}

{% block scripts %}
<script>
function toggleSelectors() {
    const type = document.getElementById('type').value;
    const selectors = document.getElementById('selectors');

    if (type === 'generic') {
        selectors.classList.add('active');
    } else {
        selectors.classList.remove('active');
    }
}

// Show selectors by default since generic is selected
toggleSelectors();
</script>
{% endblock %}
